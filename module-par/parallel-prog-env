# -*- sh -*-

case "$-" in
*i*)
    ;;
*)
    # Non-interactive shell: set the "exit on error" flag
    set -e
    ;;
esac


CLUSTER=$(cat /etc/cluster)

if [ "$CLUSTER" = turing ]; then
    {
    # Prepares computing environment for Turing:
    enable_lmod
    module use /scratch-lustre/DeapSECURE/lmod
    module load DeapSECURE
    module load icc/19 impi/19
    module load python/3.7
    module load mpi4py
    } &> /dev/null
elif [ "$CLUSTER" = wahab ]; then
    {
    # Prepares computing environment for Wahab:
    module load DeapSECURE
    module load openmpi/3.1.4
    module load ucx/1.9.0
    #module list
    } &> /dev/null
else
    echo "Error: Unsupported cluster: $CLUSTER" >&2
    exit 2
fi

